<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>CADScale</title>
  <meta name="theme-color" content="#111318">
  <!-- Manifest con versione -->
  <link rel="manifest" href="/CADScale-PWA/manifest.json">

  <!-- Icona home di Safari -->
  <link rel="apple-touch-icon" sizes="180x180" href="/CADScale-PWA/HomeSafari.png">

  <!-- Favicons per Safari macOS -->
  <link rel="icon" type="image/png" sizes="16x16" href="/CADScale-PWA/cadscale-16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/CADScale-PWA/cadscale-32.png">

  <!-- Icone standard PWA -->
  <link rel="icon" type="image/png" sizes="192x192" href="/CADScale-PWA/cadscale-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/CADScale-PWA/cadscale-512.png">

  <!-- Open Graph (aiuta Safari/cronologia a prendere l'immagine giusta) -->
  <meta property="og:title" content="CADScale">
  <meta property="og:image" content="/CADScale-PWA/cadscale-512.png">
  <link rel="image_src" href="/CADScale-PWA/cadscale-512.png">

  <!-- Nome su Home screen iOS -->
  <meta name="apple-mobile-web-app-title" content="CADScale">
  <link rel="stylesheet" href="/CADScale-PWA/styles.css">
  <script defer src="/CADScale-PWA/script.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', async () => {
        try {
          const reg = await navigator.serviceWorker.register('/CADScale-PWA/service-worker.js', { scope: '/CADScale-PWA/' });
          reg.update();
          if (reg.waiting) reg.waiting.postMessage({ type: 'SKIP_WAITING' });
          reg.addEventListener('updatefound', () => {
            const sw = reg.installing;
            if (!sw) return;
            sw.addEventListener('statechange', () => {
              if (sw.state === 'installed' && navigator.serviceWorker.controller) {
                location.reload();
              }
            });
          });
          navigator.serviceWorker.addEventListener('controllerchange', () => {
            location.reload();
          });
        } catch (e) {
          console.error(e);
        }
      });
    }
  </script>
</head>
<body>
  <main class="card">
      <h1 class="title">
        Scala desiderata, modello in
        <select id="unit" class="unit-pick" aria-label="Unità modello">
          <option>mm</option>
          <option>cm</option>
          <option>dm</option>
          <option selected>m</option>
          <option>dam</option>
          <option>hm</option>
          <option>km</option>
        </select>
      </h1>

      <div class="row">
        <input id="real" placeholder="Es. 1:200 • 0,5 • 1/2" inputmode="text" autocapitalize="off" autocorrect="off" spellcheck="false" autocomplete="off">
      </div>

    <h2>Scala layout di AutoCAD (in mm)</h2>
    <div class="row">
        <input id="acad" placeholder="Es. 1000:200 • 5 • 5/1" inputmode="text" autocapitalize="off" autocorrect="off" spellcheck="false" autocomplete="off">
    </div>

    <div class="row buttons">
      <button id="calc">Calcola</button>
      <button id="reset" class="secondary">Reset</button>
      <span id="error" class="error"></span>
    </div>
  </main>
</body>
</html>
